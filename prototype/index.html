<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1"
    />
    <title>é¡¹ç›®ä»»åŠ¡ç®¡ç†åŸå‹</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --bg: #0b1220;
        --panel: #0f172a;
        --muted: #94a3b8;
        --text: #e2e8f0;
        --accent: #00e5ff;
        --accent-2: #7c3aed;
        --ok: #22c55e;
        --warn: #f59e0b;
        --danger: #ef4444;
        --shadow: 0 10px 30px rgba(0, 229, 255, 0.08),
          0 2px 10px rgba(124, 58, 237, 0.08);
        --radius: 14px;
      }
      * {
        box-sizing: border-box;
      }
      html,
      body,
      #root {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto,
          Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--text);
        background: radial-gradient(
            1200px 800px at 80% -10%,
            rgba(124, 58, 237, 0.15),
            transparent
          ),
          radial-gradient(
            1000px 700px at -20% 20%,
            rgba(0, 229, 255, 0.12),
            transparent
          ),
          var(--bg);
      }
      .app {
        display: grid;
        grid-template-columns: 260px 1fr;
        grid-template-rows: auto 1fr;
        grid-template-areas:
          "sidebar header"
          "sidebar main";
        height: 100%;
      }
      header {
        grid-area: header;
        display: flex;
        align-items: center;
        gap: 16px;
        padding: 14px 18px;
        border-bottom: 1px solid rgba(148, 163, 184, 0.15);
        background: linear-gradient(
          180deg,
          rgba(15, 23, 42, 0.9),
          rgba(15, 23, 42, 0.6)
        );
        backdrop-filter: blur(10px);
        position: sticky;
        top: 0;
        z-index: 10;
      }
      .logo {
        display: flex;
        align-items: center;
        gap: 10px;
        font-weight: 700;
        letter-spacing: 0.5px;
      }
      .logo-badge {
        width: 28px;
        height: 28px;
        border-radius: 8px;
        background: linear-gradient(135deg, var(--accent), var(--accent-2));
        box-shadow: var(--shadow);
      }
      .search {
        flex: 1;
        position: relative;
      }
      .search input {
        width: 100%;
        padding: 10px 14px 10px 38px;
        border-radius: 10px;
        border: 1px solid rgba(148, 163, 184, 0.2);
        background: rgba(2, 6, 23, 0.6);
        color: var(--text);
        outline: none;
      }
      .search-icon {
        position: absolute;
        left: 12px;
        top: 50%;
        transform: translateY(-50%);
        color: var(--muted);
      }
      .header-actions {
        display: flex;
        gap: 10px;
      }
      .btn {
        padding: 10px 14px;
        border-radius: 10px;
        border: 1px solid rgba(148, 163, 184, 0.2);
        background: linear-gradient(
          180deg,
          rgba(2, 6, 23, 0.8),
          rgba(15, 23, 42, 0.8)
        );
        color: var(--text);
        cursor: pointer;
      }
      .btn.primary {
        border-color: rgba(0, 229, 255, 0.4);
        box-shadow: 0 0 0 1px rgba(0, 229, 255, 0.2) inset;
      }

      aside {
        grid-area: sidebar;
        border-right: 1px solid rgba(148, 163, 184, 0.15);
        background: linear-gradient(
          180deg,
          rgba(2, 6, 23, 0.7),
          rgba(15, 23, 42, 0.6)
        );
        backdrop-filter: blur(8px);
        padding: 16px 12px;
        display: flex;
        flex-direction: column;
        gap: 10px;
      }
      .nav-group {
        color: var(--muted);
        font-size: 12px;
        padding: 6px 10px;
      }
      .nav-item {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 10px 12px;
        border-radius: 10px;
        color: var(--text);
        text-decoration: none;
        cursor: pointer;
      }
      .nav-item.active {
        background: rgba(0, 229, 255, 0.08);
        box-shadow: var(--shadow);
      }
      .chip {
        font-size: 12px;
        color: var(--muted);
      }

      main {
        grid-area: main;
        padding: 18px;
        overflow: auto;
        display: grid;
        gap: 16px;
        grid-template-rows: auto auto 1fr;
      }
      .cards {
        display: grid;
        gap: 16px;
        grid-template-columns: repeat(4, minmax(180px, 1fr));
      }
      .card {
        border: 1px solid rgba(148, 163, 184, 0.15);
        background: linear-gradient(
          180deg,
          rgba(2, 6, 23, 0.6),
          rgba(15, 23, 42, 0.6)
        );
        border-radius: var(--radius);
        padding: 14px;
        box-shadow: var(--shadow);
      }
      .card h4 {
        margin: 0 0 8px;
        font-size: 13px;
        color: var(--muted);
      }
      .card strong {
        font-size: 22px;
        letter-spacing: 0.3px;
      }
      .progress {
        margin-top: 10px;
        height: 8px;
        border-radius: 6px;
        background: rgba(148, 163, 184, 0.15);
        overflow: hidden;
      }
      .progress > span {
        display: block;
        height: 100%;
        background: linear-gradient(90deg, var(--accent), #7dd3fc);
      }

      .toolbar {
        display: flex;
        gap: 10px;
        align-items: center;
        flex-wrap: wrap;
      }
      .select,
      .input {
        padding: 8px 12px;
        border-radius: 10px;
        border: 1px solid rgba(148, 163, 184, 0.2);
        background: rgba(2, 6, 23, 0.6);
        color: var(--text);
      }

      /* Kanban */
      .kanban {
        display: grid;
        gap: 16px;
        grid-template-columns: repeat(4, minmax(220px, 1fr));
      }
      .col {
        border: 1px solid rgba(148, 163, 184, 0.15);
        background: rgba(2, 6, 23, 0.5);
        border-radius: var(--radius);
        padding: 10px;
      }
      .col h5 {
        margin: 6px 6px 10px;
        color: var(--muted);
        font-weight: 600;
      }
      .task {
        border: 1px solid rgba(148, 163, 184, 0.2);
        border-radius: 12px;
        padding: 10px;
        background: linear-gradient(
          180deg,
          rgba(15, 23, 42, 0.8),
          rgba(2, 6, 23, 0.6)
        );
        margin: 10px;
        box-shadow: var(--shadow);
      }
      .task .meta {
        display: flex;
        justify-content: space-between;
        color: var(--muted);
        font-size: 12px;
        margin-top: 6px;
      }
      .tag {
        font-size: 11px;
        padding: 2px 8px;
        border-radius: 999px;
        border: 1px solid rgba(148, 163, 184, 0.25);
        color: var(--muted);
      }

      /* Timeline (Gantt placeholder) */
      .timeline {
        border: 1px solid rgba(148, 163, 184, 0.15);
        border-radius: var(--radius);
        background: rgba(2, 6, 23, 0.5);
        padding: 12px;
      }
      .timeline svg {
        width: 100%;
        height: 160px;
      }

      /* Alerts */
      .alerts {
        display: grid;
        gap: 10px;
      }
      .alert {
        border: 1px solid rgba(148, 163, 184, 0.15);
        border-radius: 12px;
        padding: 12px;
        display: flex;
        gap: 10px;
        align-items: center;
        background: rgba(2, 6, 23, 0.55);
      }
      .dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
      }

      /* Responsive */
      @media (max-width: 1024px) {
        .cards {
          grid-template-columns: repeat(2, 1fr);
        }
        .kanban {
          grid-template-columns: repeat(2, minmax(220px, 1fr));
        }
        .app {
          grid-template-columns: 70px 1fr;
        }
        aside .label {
          display: none;
        }
      }
      @media (max-width: 640px) {
        .app {
          grid-template-columns: 1fr;
          grid-template-rows: auto 1fr auto;
          grid-template-areas:
            "header"
            "main"
            "sidebar";
        }
        aside {
          position: sticky;
          bottom: 0;
          flex-direction: row;
          gap: 6px;
          padding: 8px;
          background: linear-gradient(
            0deg,
            rgba(2, 6, 23, 0.95),
            rgba(2, 6, 23, 0.6)
          );
        }
        .cards {
          grid-template-columns: 1fr;
        }
        .kanban {
          grid-template-columns: 1fr;
        }
        header {
          position: static;
        }
      }
    </style>
  </head>
  <body>
    <div id="root"></div>

    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.development.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"
    ></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
      const { useMemo, useState } = React;

      const TABS = [
        { key: "projects", icon: "ğŸ“", label: "é¡¹ç›®" },
        { key: "board", icon: "ğŸ§©", label: "çœ‹æ¿" },
        { key: "timeline", icon: "ğŸ“…", label: "è¿›åº¦" },
        { key: "alerts", icon: "âš¡", label: "é¢„è­¦" },
      ];

      const initialTasks = [
        {
          id: "t1",
          title: "éœ€æ±‚è¯„å®¡",
          owner: "Alice",
          status: "todo",
          progress: 0.2,
          dept: "äº§å“",
          start: 1,
          end: 3,
          risk: "low",
        },
        {
          id: "t2",
          title: "UI è®¾è®¡",
          owner: "Bob",
          status: "doing",
          progress: 0.5,
          dept: "è®¾è®¡",
          start: 2,
          end: 6,
          risk: "medium",
        },
        {
          id: "t3",
          title: "æ¥å£è”è°ƒ",
          owner: "Carol",
          status: "blocked",
          progress: 0.3,
          dept: "ç ”å‘",
          start: 5,
          end: 9,
          risk: "high",
        },
        {
          id: "t4",
          title: "é›†æˆæµ‹è¯•",
          owner: "Dan",
          status: "done",
          progress: 1.0,
          dept: "æµ‹è¯•",
          start: 8,
          end: 10,
          risk: "low",
        },
      ];

      function Header({ onSearch, onNew }) {
        return (
          <header>
            <div className="logo">
              <div className="logo-badge" /> é¡¹ç›®ä»»åŠ¡ç®¡ç†
            </div>
            <div className="search">
              <span className="search-icon">ğŸ”</span>
              <input
                placeholder="æœç´¢é¡¹ç›®/ä»»åŠ¡/æˆå‘˜â€¦"
                onChange={(e) => onSearch(e.target.value)}
              />
            </div>
            <div className="header-actions">
              <button className="btn" onClick={() => alert("å¯¼å…¥å ä½")}>
                å¯¼å…¥
              </button>
              <button className="btn primary" onClick={onNew}>
                æ–°å»ºé¡¹ç›®
              </button>
            </div>
          </header>
        );
      }

      function Sidebar({ tab, setTab }) {
        return (
          <aside>
            <div className="nav-group">å¯¼èˆª</div>
            {TABS.map((t) => (
              <div
                key={t.key}
                className={"nav-item " + (tab === t.key ? "active" : "")}
                onClick={() => setTab(t.key)}
              >
                <span>{t.icon}</span>
                <span className="label">{t.label}</span>
              </div>
            ))}
            <div className="nav-group">ç­›é€‰</div>
            <div className="chip">éƒ¨é—¨</div>
            <div className="chip">è´Ÿè´£äºº</div>
            <div className="chip">çŠ¶æ€</div>
          </aside>
        );
      }

      function MetricCard({ title, value, progress }) {
        return (
          <div className="card">
            <h4>{title}</h4>
            <strong>{value}</strong>
            {progress != null && (
              <div className="progress">
                <span style={{ width: `${Math.round(progress * 100)}%` }} />
              </div>
            )}
          </div>
        );
      }

      function Kanban({ tasks }) {
        const columns = [
          { key: "todo", title: "æœªå¼€å§‹" },
          { key: "doing", title: "è¿›è¡Œä¸­" },
          { key: "blocked", title: "é˜»å¡" },
          { key: "done", title: "å·²å®Œæˆ" },
        ];
        return (
          <div className="kanban">
            {columns.map((col) => (
              <div className="col" key={col.key}>
                <h5>{col.title}</h5>
                {tasks
                  .filter((t) => t.status === col.key)
                  .map((t) => (
                    <div className="task" key={t.id}>
                      <div
                        style={{
                          display: "flex",
                          justifyContent: "space-between",
                          alignItems: "center",
                        }}
                      >
                        <div style={{ fontWeight: 600 }}>{t.title}</div>
                        <span className="tag">{t.owner}</span>
                      </div>
                      <div className="meta">
                        <span>è¿›åº¦ {Math.round(t.progress * 100)}%</span>
                        <span
                          style={{
                            color:
                              t.status === "done"
                                ? "var(--ok)"
                                : t.status === "blocked"
                                ? "var(--danger)"
                                : "var(--muted)",
                          }}
                        >
                          {t.status}
                        </span>
                      </div>
                    </div>
                  ))}
              </div>
            ))}
          </div>
        );
      }

      function Timeline({ tasks }) {
        // Simple Gantt-like bars across 10 units
        const total = 10;
        return (
          <div className="timeline card">
            <h4>æ—¶é—´è½´ï¼ˆç¤ºæ„ï¼‰</h4>
            <svg
              viewBox={`0 0 1000 ${tasks.length * 36 + 30}`}
              preserveAspectRatio="none"
            >
              {[...Array(total + 1)].map((_, i) => (
                <line
                  key={i}
                  x1={(i / total) * 1000}
                  y1={0}
                  x2={(i / total) * 1000}
                  y2={tasks.length * 36 + 20}
                  stroke="rgba(148,163,184,0.2)"
                  strokeWidth="1"
                />
              ))}
              {tasks.map((t, idx) => {
                const x = (t.start / total) * 1000;
                const w = ((t.end - t.start) / total) * 1000;
                const y = 20 + idx * 36;
                const color =
                  t.status === "done"
                    ? "url(#gradOk)"
                    : t.status === "blocked"
                    ? "url(#gradDanger)"
                    : "url(#gradAccent)";
                return (
                  <g key={t.id}>
                    <text x="8" y={y - 6} fill="var(--muted)" fontSize="12">
                      {t.title}
                    </text>
                    <rect
                      x={x}
                      y={y}
                      rx="6"
                      ry="6"
                      width={w}
                      height="16"
                      fill={color}
                    />
                  </g>
                );
              })}
              <defs>
                <linearGradient id="gradAccent" x1="0" x2="1">
                  <stop offset="0%" stopColor="#00e5ff" />
                  <stop offset="100%" stopColor="#7dd3fc" />
                </linearGradient>
                <linearGradient id="gradOk" x1="0" x2="1">
                  <stop offset="0%" stopColor="#22c55e" />
                  <stop offset="100%" stopColor="#86efac" />
                </linearGradient>
                <linearGradient id="gradDanger" x1="0" x2="1">
                  <stop offset="0%" stopColor="#ef4444" />
                  <stop offset="100%" stopColor="#fca5a5" />
                </linearGradient>
              </defs>
            </svg>
          </div>
        );
      }

      function Alerts({ tasks }) {
        const items = [
          {
            id: "a1",
            level: "high",
            text: "æ¥å£è”è°ƒå­˜åœ¨é˜»å¡ï¼Œå‰ç½®ä¾èµ–æœªå®Œæˆ",
            target: "æ¥å£è”è°ƒ",
          },
          {
            id: "a2",
            level: "medium",
            text: "UI è®¾è®¡è¿›åº¦æ»å 10%",
            target: "UI è®¾è®¡",
          },
          {
            id: "a3",
            level: "info",
            text: "éœ€æ±‚è¯„å®¡å°†äºæ˜æ—¥åˆ°æœŸ",
            target: "éœ€æ±‚è¯„å®¡",
          },
        ];
        const color = (lvl) =>
          lvl === "high"
            ? "var(--danger)"
            : lvl === "medium"
            ? "var(--warn)"
            : "var(--accent)";
        return (
          <div className="alerts">
            {items.map((it) => (
              <div key={it.id} className="alert">
                <span className="dot" style={{ background: color(it.level) }} />
                <div style={{ flex: 1 }}>
                  <div style={{ fontWeight: 600 }}>{it.text}</div>
                  <div style={{ color: "var(--muted)", fontSize: 12 }}>
                    å…³è”ï¼š{it.target}
                  </div>
                </div>
                <button className="btn" onClick={() => alert("å·²é€šçŸ¥ç›¸å…³æˆå‘˜")}>
                  é€šçŸ¥
                </button>
              </div>
            ))}
          </div>
        );
      }

      function Projects({ tasks }) {
        const doneRate = useMemo(
          () =>
            tasks.filter((t) => t.status === "done").length / tasks.length || 0,
          [tasks]
        );
        const blocked = useMemo(
          () => tasks.filter((t) => t.status === "blocked").length,
          [tasks]
        );
        return (
          <>
            <div className="cards">
              <MetricCard title="é¡¹ç›®æ•°" value={3} />
              <MetricCard title="ä»»åŠ¡æ•°" value={tasks.length} />
              <MetricCard
                title="å®Œæˆç‡"
                value={`${Math.round(doneRate * 100)}%`}
                progress={doneRate}
              />
              <MetricCard title="é˜»å¡æ•°" value={blocked} />
            </div>

            <div className="card">
              <div className="toolbar">
                <select className="select" defaultValue="å…¨éƒ¨éƒ¨é—¨">
                  <option>å…¨éƒ¨éƒ¨é—¨</option>
                  <option>äº§å“</option>
                  <option>è®¾è®¡</option>
                  <option>ç ”å‘</option>
                  <option>æµ‹è¯•</option>
                </select>
                <select className="select" defaultValue="å…¨éƒ¨çŠ¶æ€">
                  <option>å…¨éƒ¨çŠ¶æ€</option>
                  <option>æœªå¼€å§‹</option>
                  <option>è¿›è¡Œä¸­</option>
                  <option>é˜»å¡</option>
                  <option>å·²å®Œæˆ</option>
                </select>
                <input className="input" placeholder="ç­›é€‰å…³é”®å­—" />
                <button className="btn">å¯¼å‡º CSV</button>
              </div>
            </div>

            <Kanban tasks={tasks} />
          </>
        );
      }

      function App() {
        const [tab, setTab] = useState("projects");
        const [q, setQ] = useState("");
        const [tasks, setTasks] = useState(initialTasks);

        const filtered = useMemo(() => {
          if (!q) return tasks;
          return tasks.filter((t) =>
            `${t.title}${t.owner}`.toLowerCase().includes(q.toLowerCase())
          );
        }, [q, tasks]);

        const onNew = () => {
          const id = Math.random().toString(36).slice(2, 7);
          setTasks((prev) => [
            {
              id,
              title: `æ–°ä»»åŠ¡ ${id}`,
              owner: "æœªæŒ‡æ´¾",
              status: "todo",
              progress: 0,
              dept: "æœªåˆ†é…",
              start: 0,
              end: 1,
              risk: "low",
            },
            ...prev,
          ]);
        };

        return (
          <div className="app">
            <Header onSearch={setQ} onNew={onNew} />
            <Sidebar tab={tab} setTab={setTab} />
            <main>
              {tab === "projects" && <Projects tasks={filtered} />}
              {tab === "board" && <Kanban tasks={filtered} />}
              {tab === "timeline" && <Timeline tasks={filtered} />}
              {tab === "alerts" && <Alerts tasks={filtered} />}
            </main>
          </div>
        );
      }

      ReactDOM.createRoot(document.getElementById("root")).render(<App />);
    </script>
  </body>
</html>

